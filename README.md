# CustomThreadPool

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ –Ω–∞ Java**, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ—Ç–æ–∫–æ–≤, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –æ—á–µ—Ä–µ–¥–µ–π –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–¥–∞—á. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π (`ThreadPoolExecutor`), –∑–¥–µ—Å—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:

- –ù–µ—Å–∫–æ–ª—å–∫–æ –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞—á.
- –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–¥–∞—á Round Robin.
- –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ minSpareThreads, keepAliveTime –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤–æ—Ä–∫–µ—Ä–æ–≤.
- –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞–∑–∞ (reject policy).
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤, –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á, –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∏ —Ç.–ø.).

---

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É–ª–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä           | –û–ø–∏—Å–∞–Ω–∏–µ                                               |
|--------------------|--------------------------------------------------------|
| corePoolSize       | –ë–∞–∑–æ–≤–æ–µ —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤ (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–±–∏–≤–∞—é—Ç—Å—è).          |
| maxPoolSize        | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤.                       |
| keepAliveTime      | –í—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è –ø–æ—Ç–æ–∫–æ–≤ —Å–≤–µ—Ä—Ö corePoolSize –ø–µ—Ä–µ–¥ —É–±–∏–π—Å—Ç–≤–æ–º. |
| queueSize          | –†–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–π –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á.                           |
| minSpareThreads    | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤, –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–¥–∞–Ω–∏—è.          |
| numberOfQueues     | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞—á (–¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏).          |

---

## üöÄ –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ë—ã–ª–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ —Å–µ—Ä–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–π —Å:

- `java.util.concurrent.ThreadPoolExecutor`
- –ü—É–ª –ø–æ—Ç–æ–∫–æ–≤ –∏–∑ Apache Tomcat

### –£—Å–ª–æ–≤–∏—è —Ç–µ—Å—Ç–∞:

- 100 –∑–∞–¥–∞—á, –∫–∞–∂–¥–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ~3 —Å–µ–∫—É–Ω–¥—ã.
- –†–∞–∑–ª–∏—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –∏ –æ—á–µ—Ä–µ–¥–µ–π.
- –ò–∑–º–µ—Ä—è–ª–∞—Å—å —Å—É–º–º–∞—Ä–Ω–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è        | –û–±—â–µ–µ –≤—Ä–µ–º—è (100 –∑–∞–¥–∞—á) | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞–¥–∞—á–∏ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                          |
|-------------------|-------------------------|----------------------|-------------------------------------|
| CustomThreadPool  | ~32 —Å–µ–∫                 | ~3.2 —Å–µ–∫             | —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ + –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å |
| ThreadPoolExecutor| ~34 —Å–µ–∫                 | ~3.4 —Å–µ–∫             | –ø—Ä–∏ —Ä–∞–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö               |
| Tomcat Executor   | ~35 —Å–µ–∫                 | ~3.5 —Å–µ–∫             | –±–µ–∑ —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π       |

> **–í—ã–≤–æ–¥:** –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—É–ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ä–∞–≤–Ω–∏–º—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –¥–∞–µ—Ç –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∑–∞–¥–∞—á. –ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (–±–æ–ª–µ–µ 100 –∑–∞–¥–∞—á) –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é –æ—á–µ—Ä–µ–¥–µ–π.

---

## üìä –ú–∏–Ω–∏-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–ü—Ä–æ–≤–æ–¥–∏–ª—Å—è –ø–æ–¥–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏—Ö –Ω–∞–∏–ª—É—á—à–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö:

| corePoolSize | maxPoolSize | queueSize | numberOfQueues | minSpareThreads | –†–µ–∑—É–ª—å—Ç–∞—Ç             |
|--------------|-------------|-----------|----------------|------------------|------------------------|
| 2            | 6           | 3         | 3              | 1                | –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è 20-50 –∑–∞–¥–∞—á |
| 4            | 10          | 5         | 5              | 2                | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ 100+ |
| 1            | 3           | 2         | 1              | 1                | –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞, –º–Ω–æ–≥–æ –æ—Ç–∫–∞–∑–æ–≤   |

> **–ò—Ç–æ–≥:** —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –æ—á–µ—Ä–µ–¥–µ–π –∏ –ø–æ—Ç–æ–∫–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –≤—ã—Å–æ–∫–∏–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∞–º–∏. –û–¥–Ω–∞–∫–æ —á—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ä–æ—Å—Ç—É overhead (—Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–±–∏–π—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤).

---

## üîÅ –ú–µ—Ö–∞–Ω–∏–∑–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–¥–∞—á

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–ª–≥–æ—Ä–∏—Ç–º **Round Robin**:

1. –í—Å–µ –∑–∞–¥–∞—á–∏ –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ `TaskQueueManager`, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π.
2. –ö–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –æ—á–µ—Ä–µ–¥—å –ø–æ –ø–æ—Ä—è–¥–∫—É (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏).
3. –†–∞–±–æ—á–∏–µ –ø–æ—Ç–æ–∫–∏ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω—ã –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥—å—é, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å.
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º —á–∏—Å–ª–µ –∑–∞–¥–∞—á.
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –∑–∞ –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–µ–π –æ—á–µ—Ä–µ–¥–∏.

---

## üõ° –ü–æ–ª–∏—Ç–∏–∫–∞ –æ—Ç–∫–∞–∑–æ–≤

–ï—Å–ª–∏:

- –í—Å–µ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã, –∏
- –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤,

—Ç–æ –∑–∞–¥–∞—á–∏ **–æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è** —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º `[Rejected] Task ...`. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—É–ª–∞ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ.

---

## üì¶ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
javac *.java
java Main
